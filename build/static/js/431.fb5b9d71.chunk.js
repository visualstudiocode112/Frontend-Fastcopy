"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[431],{1431:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var n=s(2555),a=s(5043),l=s(9722),r=s(4784),o=s(9001),c=s(5945),i=s(5469),d=s(5692),m=s(579);function h(e){let{items:t=[],autoplay:s=!0,autoplayInterval:n=3500,showArrows:l=!0,showDots:r=!1}=e;const[o,h]=(0,c.A)({loop:!1,align:"center"}),u=(0,a.useRef)(null),[x,p]=(0,a.useState)(0),f=(0,a.useRef)(null),[v,g]=(0,a.useState)("33.333%"),w=(0,a.useCallback)(e=>h&&h.scrollTo(e),[h]);return(0,a.useEffect)(()=>{if(!h)return;const e=()=>p(h.selectedScrollSnap());return h.on("select",e),e(),()=>h.off("select",e)},[h]),(0,a.useEffect)(()=>{const e=()=>{try{const e=window.innerWidth;g(e<=420?"50%":e<=640?"33.333%":e<=1024?"25%":e<=1280?"20%":"16.6667%")}catch(e){}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(!h||!s)return;const e=()=>{if(!h)return;const e=h.scrollSnapList(),t=h.selectedScrollSnap()+1;t>=e.length?h.scrollTo(0):h.scrollTo(t)};f.current=setInterval(e,n);const t=u.current,a=()=>clearInterval(f.current),l=()=>{clearInterval(f.current),f.current=setInterval(e,n)};return t&&(t.addEventListener("pointerenter",a),t.addEventListener("pointerleave",l)),()=>{clearInterval(f.current),t&&(t.removeEventListener("pointerenter",a),t.removeEventListener("pointerleave",l))}},[h,s,n]),(0,m.jsxs)("div",{className:"w-full relative",children:[(0,m.jsx)("div",{className:"overflow-hidden",ref:e=>{o(e),u.current=e},children:(0,m.jsx)("div",{className:"flex",children:t.map((e,t)=>(0,m.jsx)("div",{className:"flex-shrink-0 px-2",style:{width:v,minWidth:"120px"},children:e},t))})}),l&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{"aria-label":"anterior",onClick:()=>h&&h.scrollPrev(),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/10 text-white rounded-full p-2 hidden sm:inline",children:(0,m.jsx)(i.A,{className:"w-4 h-4"})}),(0,m.jsx)("button",{"aria-label":"siguiente",onClick:()=>h&&h.scrollNext(),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/10 text-white rounded-full p-2 hidden sm:inline",children:(0,m.jsx)(d.A,{className:"w-4 h-4"})})]}),r&&(0,m.jsx)("div",{className:"flex items-center justify-center gap-2 mt-3",children:(h?h.scrollSnapList():Array.from({length:t.length})).map((e,t)=>(0,m.jsx)("button",{onClick:()=>w(t),className:"w-2 h-2 rounded-full ".concat(x===t?"bg-white":"bg-white/30"),"aria-label":"go-to-slide-".concat(t)},t))})]})}var u=s(8404),x=s(3877);function p(e){let{items:t=[],autoplay:s=!0,autoplayInterval:n=5e3}=e;const[l,r]=(0,c.A)({loop:!0,align:"start",containScroll:"trimSnaps"}),i=(0,a.useRef)(null),[d,h]=(0,a.useState)(0),u=(0,o.Zp)();if((0,a.useEffect)(()=>{if(!r)return;const e=()=>h(r.selectedScrollSnap());return r.on("select",e),e(),()=>r.off("select",e)},[r]),(0,a.useEffect)(()=>{if(!r||!s)return;const e=()=>{if(!r)return;const e=r.selectedScrollSnap()+1;e>=r.scrollSnapList().length?r.scrollTo(0):r.scrollTo(e)};i.current=setInterval(e,n);const t=r&&r.containerNode(),a=()=>clearInterval(i.current),l=()=>{clearInterval(i.current),i.current=setInterval(e,n)};return t&&(t.addEventListener("pointerenter",a),t.addEventListener("pointerleave",l)),()=>{clearInterval(i.current),t&&(t.removeEventListener("pointerenter",a),t.removeEventListener("pointerleave",l))}},[r,s,n]),!t||0===t.length)return null;const p=new Date;t.filter((e,t)=>Math.abs(t-d)<=1);return(0,m.jsxs)("div",{className:"w-full relative",children:[(0,m.jsx)("div",{className:"embla overflow-hidden",ref:l,children:(0,m.jsx)("div",{className:"embla__container flex",children:t.map((e,t)=>{if(Math.abs(t-d)>1)return(0,m.jsx)("div",{className:"embla__slide min-h-[45vh] sm:min-h-[55vh] w-full flex-shrink-0 relative"},e.id||t);const s=e.backdrop_path||e.poster_path,n=s?"".concat("https://image.tmdb.org/t/p/original").concat(s):null,a=e.title||e.name||e.original_title,l=e.overview||"",r=e._date||e.release_date||e.first_air_date,o=r?new Date(r):new Date("1970-01-01"),c=!isNaN(o)&&(p-o)/864e5<=30,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return e?e.length>t?e.slice(0,t-1)+"\u2026":e:""}(l,300);return(0,m.jsxs)("div",{className:"embla__slide min-h-[45vh] sm:min-h-[55vh] w-full flex-shrink-0 relative",children:[n?(0,m.jsx)("img",{src:n,alt:a,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy",decoding:"async"}):(0,m.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800"}),(0,m.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-transparent to-transparent"}),(0,m.jsx)("div",{className:"relative z-10 container mx-auto py-20 px-4 flex items-center",style:{minHeight:"55vh"},children:(0,m.jsxs)("div",{className:"max-w-3xl text-left",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,m.jsx)("h2",{className:"text-3xl sm:text-5xl font-bold text-white",children:a}),c&&(0,m.jsx)("span",{className:"inline-block bg-rose-500 text-white text-xs font-semibold px-2 py-1 rounded",children:"Nuevo"})]}),(0,m.jsx)("p",{className:"text-gray-200 mb-6 line-clamp-4",children:i}),(0,m.jsx)("div",{className:"flex gap-3",children:(0,m.jsx)(x.$,{"aria-label":"ver-detalles-".concat(e.id),onClick:()=>u("/content/".concat(e.id)),className:"bg-gradient-to-r from-cyan-500 to-blue-500",children:"Ver detalles"})})]})})]},e.id||t)})})}),(0,m.jsx)("div",{className:"absolute bottom-4 left-0 right-0 flex items-center justify-center gap-2",children:Array.from({length:t.length}).map((e,t)=>(0,m.jsx)("button",{onClick:()=>r&&r.scrollTo(t),className:"w-3 h-3 rounded-full ".concat(d===t?"bg-white":"bg-white/30"),"aria-label":"go-to-".concat(t)},t))})]})}const f="".concat("http://3.90.248.179:8000","/api"),v=()=>{const{user:e,login:t,logout:s}=(0,a.useContext)(r.cy),{searchQuery:c}=(0,a.useContext)(r.o7),[i,d]=(0,a.useState)([]),[x,v]=(0,a.useState)(!1),[g,w]=(0,a.useState)(null),[y,b]=(0,a.useState)(()=>{try{const e=localStorage.getItem("showlib_content");return e?JSON.parse(e):[]}catch(e){return[]}}),[j,N]=(0,a.useState)([]),[_,S]=(0,a.useState)(()=>{try{const e=localStorage.getItem("user_history");return e?JSON.parse(e):{genres:[],types:[],genreCount:{}}}catch(e){return{genres:[],types:[],genreCount:{}}}}),A=(0,o.Zp)();(0,a.useEffect)(()=>{(async()=>{try{const e=await l.A.get("".concat(f,"/content"));b(e.data),N(e.data),localStorage.setItem("showlib_content",JSON.stringify(e.data))}catch(e){console.error("Error fetching content",e);try{const e=localStorage.getItem("showlib_content");e&&(b(JSON.parse(e)),N(JSON.parse(e)))}catch(t){}}})()},[]),(0,a.useEffect)(()=>{let e=!1;return(async()=>{if(!c||""===c.trim())return d([]),w(null),v(!1),void N(y);v(!0),w(null);try{const t=await l.A.get("".concat(f,"/content"),{params:{q:c}});e||(d(t.data||[]),N(t.data||[]))}catch(t){e||w("Error buscando contenido")}finally{e||v(!1)}})(),()=>{e=!0}},[c,y]),(0,a.useEffect)(()=>{if(c&&e){const e=[],t=[];j.forEach(s=>{s.genres&&s.genres.forEach(t=>{e.includes(t)||e.push(t)}),s.content_type&&!t.includes(s.content_type)&&t.push(s.content_type)});const s={genres:Array.from(new Set([..._.genres,...e])).slice(-10),types:Array.from(new Set([..._.types,...t])).slice(-5),genreCount:(0,n.A)({},_.genreCount)};S(s),localStorage.setItem("user_history",JSON.stringify(s))}},[c,j,e]);const I=t=>{if(e){const e=(0,n.A)({},_.genreCount);t.genres&&t.genres.forEach(t=>{e[t]=(e[t]||0)+1});const s={genres:t.genres?Array.from(new Set([..._.genres,...t.genres])).slice(-10):_.genres,types:t.content_type?Array.from(new Set([..._.types,t.content_type])).slice(-5):_.types,genreCount:e};S(s),localStorage.setItem("user_history",JSON.stringify(s))}A("/content/".concat(t.id))},[k,C]=(0,a.useState)(()=>Math.floor(Date.now()/18e5));(0,a.useEffect)(()=>{const e=setInterval(()=>{C(Math.floor(Date.now()/18e5))},3e5);return()=>clearInterval(e)},[]);const E=Object.entries(_.genreCount||{}).sort((e,t)=>t[1]-e[1]).slice(0,3).map(e=>{let[t]=e;return t}),D=function(e,t){let s,n,a=e.length,l=(r=t,function(){var e=r+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296});var r;const o=e.slice();for(;a;)n=Math.floor(l()*a--),s=o[a],o[a]=o[n],o[n]=s;return o}(y.filter(e=>(E.length>0?e.genres&&e.genres.some(e=>E.includes(e)):_.genres.some(t=>e.genres&&e.genres.includes(t)))||_.types.includes(e.content_type)).sort((e,t)=>t._date-e._date),k).slice(0,10),L=j.map(e=>(0,n.A)((0,n.A)({},e),{},{_date:new Date((e.release_date||e.first_air_date||"1970-01-01").slice(0,10))})).filter(e=>"movie"===e.content_type&&"Invalid Date"!==e._date.toString()).sort((e,t)=>t._date-e._date),M=j.map(e=>(0,n.A)((0,n.A)({},e),{},{_date:new Date((e.release_date||e.first_air_date||"1970-01-01").slice(0,10))})).filter(e=>"tv"===e.content_type&&"Invalid Date"!==e._date.toString()).sort((e,t)=>t._date-e._date),O=j.map(e=>(0,n.A)((0,n.A)({},e),{},{_date:new Date((e.release_date||e.first_air_date||"1970-01-01").slice(0,10))})).filter(e=>"novela"===e.content_type&&"Invalid Date"!==e._date.toString()).sort((e,t)=>t._date-e._date);return(0,m.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[(0,m.jsx)("section",{className:"pb-2 px-0",children:(0,m.jsx)(p,{items:y.map(e=>(0,n.A)((0,n.A)({},e),{},{_date:new Date((e.release_date||e.first_air_date||"1970-01-01").slice(0,10))})).filter(e=>"Invalid Date"!==e._date.toString()).sort((e,t)=>t._date-e._date).slice(0,5),autoplay:!0,autoplayInterval:5e3})}),e&&D.length>0&&(0,m.jsxs)("section",{className:"mb-8 pt-2",children:[(0,m.jsx)("h3",{className:"text-xl sm:text-3xl font-bold text-pink-400 mb-2 sm:mb-4 text-center",children:"Recomendados para ti"}),(0,m.jsx)("div",{className:"sm:-mx-0 -mx-2",children:(0,m.jsx)(h,{items:D.map(e=>(0,m.jsx)(u.A,{content:e,onClick:()=>I(e)},e.id)),showArrows:!0,autoplay:!0,autoplayInterval:4100,showDots:!1})})]}),(0,m.jsx)("section",{className:"mb-8 pt-2 px-0 pb-16",children:(0,m.jsxs)("div",{className:"container mx-auto",children:[L.length>0&&(0,m.jsxs)("div",{className:"mb-12",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsx)("h3",{className:"text-2xl sm:text-3xl font-bold text-cyan-400",children:"Pel\xedculas"}),(0,m.jsx)("div",{className:"flex gap-2",children:(0,m.jsx)("button",{onClick:()=>A("/contenido?type=movie"),className:"text-sm text-white/90 bg-white/5 px-3 py-1 rounded",children:"Ver todas"})})]}),(0,m.jsx)("div",{className:"sm:-mx-0 -mx-2",children:(0,m.jsx)(h,{items:L.slice(0,10).map(e=>(0,m.jsx)(u.A,{content:e,onClick:()=>I(e)},e.id)),showArrows:!0,autoplay:!0,autoplayInterval:4e3,showDots:!1})})]}),M.length>0&&(0,m.jsxs)("div",{className:"mb-12",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsx)("h3",{className:"text-2xl sm:text-3xl font-bold text-blue-400",children:"Series"}),(0,m.jsx)("div",{className:"flex gap-2",children:(0,m.jsx)("button",{onClick:()=>A("/contenido?type=tv"),className:"text-sm text-white/90 bg-white/5 px-3 py-1 rounded",children:"Ver todas"})})]}),(0,m.jsx)("div",{className:"sm:-mx-0 -mx-2",children:(0,m.jsx)(h,{items:M.slice(0,10).map(e=>(0,m.jsx)(u.A,{content:e,onClick:()=>I(e)},e.id)),showArrows:!0,autoplay:!0,autoplayInterval:4200,showDots:!1})})]}),O.length>0&&(0,m.jsxs)("div",{className:"mb-12",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsx)("h3",{className:"text-2xl sm:text-3xl font-bold text-purple-400",children:"Novelas"}),(0,m.jsx)("div",{className:"flex gap-2",children:(0,m.jsx)("button",{onClick:()=>A("/contenido?type=novela"),className:"text-sm text-white/90 bg-white/5 px-3 py-1 rounded",children:"Ver todas"})})]}),(0,m.jsx)("div",{className:"sm:-mx-0 -mx-2",children:(0,m.jsx)(h,{items:O.slice(0,10).map(e=>(0,m.jsx)(u.A,{content:e,onClick:()=>I(e)},e.id)),showArrows:!0,autoplay:!0,autoplayInterval:4400,showDots:!1})})]}),0===j.length&&(0,m.jsx)("div",{className:"text-center py-16",children:(0,m.jsx)("p",{className:"text-gray-400 text-xl",children:"No se encontr\xf3 contenido"})})]})})]})}},8404:(e,t,s)=>{s.d(t,{A:()=>l});s(5043);var n=s(579);const a="https://image.tmdb.org/t/p";function l(e){let{content:t,onClick:s}=e;const l=t.poster_path?"".concat(a,"/w500").concat(t.poster_path):"https://via.placeholder.com/500x750?text=No+Image",r=t.poster_path?"".concat(a,"/w300").concat(t.poster_path," 300w, ").concat(a,"/w500").concat(t.poster_path," 500w, ").concat(a,"/w780").concat(t.poster_path," 780w"):void 0;return(0,n.jsxs)("div",{onClick:s,className:"glass rounded-xl overflow-hidden cursor-pointer card-hover group h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"relative aspect-[2/3] overflow-hidden flex-shrink-0",children:[(0,n.jsx)("img",{src:l,srcSet:r,sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 20vw",loading:"lazy",decoding:"async",alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,n.jsxs)("div",{className:"p-3 flex-1 flex flex-col justify-between",children:[(0,n.jsx)("h4",{className:"font-semibold text-white text-[clamp(0.9rem,2.5vw,1rem)] line-clamp-2 mb-2",style:{minHeight:"2.4rem"},children:t.title}),(0,n.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,n.jsx)("span",{className:"text-xs text-gray-400",children:(e=>{if(!e)return"";const t=e.toLowerCase();return"movie"===t||"pelicula"===t?"Pel\xedcula":"tv"===t||"serie"===t?"Serie":"novela"===t?"Novela":e})(t.content_type)}),"number"===typeof t.vote_average&&t.vote_average>0?(0,n.jsxs)("span",{className:"text-xs text-yellow-400 flex items-center",children:[(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"currentColor",className:"inline mr-1 text-yellow-400",children:(0,n.jsx)("path",{d:"M10 15.27L16.18 18l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 3.73L3.82 18z"})}),t.vote_average.toFixed(1)]}):null]})]})]})}}}]);
//# sourceMappingURL=431.fb5b9d71.chunk.js.map