/*! For license information please see 745.28613021.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[745],{1140:(e,a,s)=>{s.d(a,{Wu:()=>N,ZB:()=>w,Zp:()=>p,aR:()=>u});var t=s(2555),r=s(3986),l=s(5043),c=s(9766),i=s(579);const n=["className"],d=["className"],o=["className"],m=["className"],x=["className"],h=["className"],p=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,r.A)(e,n);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,c.cn)("rounded-xl border bg-card text-card-foreground shadow",s)},l))});p.displayName="Card";const u=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,r.A)(e,d);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",s)},l))});u.displayName="CardHeader";const w=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,r.A)(e,o);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,c.cn)("font-semibold leading-none tracking-tight",s)},l))});w.displayName="CardTitle";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,r.A)(e,m);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,c.cn)("text-sm text-muted-foreground",s)},l))}).displayName="CardDescription";const N=l.forwardRef((e,a)=>{let{className:s}=e,l=(0,r.A)(e,x);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,c.cn)("p-6 pt-0",s)},l))});N.displayName="CardContent";l.forwardRef((e,a)=>{let{className:s}=e,l=(0,r.A)(e,h);return(0,i.jsx)("div",(0,t.A)({ref:a,className:(0,c.cn)("flex items-center p-6 pt-0",s)},l))}).displayName="CardFooter"},2745:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var t=s(5043),r=s(9722),l=s(4784),c=s(9001),i=s(3877),n=s(2264),d=s(1140),o=s(2224),m=s(6328),x=s(5469),h=s(4459),p=s(3528),u=s(4669);const w=(0,s(7784).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var N=s(9855),g=s(3944),j=s(579);const v="".concat("http://3.90.248.179:8000","/api"),f=()=>{const{user:e}=(0,t.useContext)(l.cy),a=(0,c.Zp)(),[s,f]=(0,t.useState)([]),[b,y]=(0,t.useState)([]),[A,k]=(0,t.useState)(""),[C,R]=(0,t.useState)(""),[Z,M]=(0,t.useState)("");(0,t.useEffect)(()=>{e?(V(),z()):a("/")},[e]);const V=async()=>{try{const e=await r.A.get("".concat(v,"/watchlist"));f(e.data)}catch(e){console.error("Error fetching watchlist",e)}},z=async()=>{try{const e=await r.A.get("".concat(v,"/user/reviews"));y(e.data)}catch(e){console.error("Error fetching user reviews",e)}};return(0,j.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 px-4 py-8 sm:p-8",children:(0,j.jsxs)("div",{className:"container mx-auto",children:[(0,j.jsxs)("div",{className:"flex flex-row items-center justify-between mb-8 gap-4 transition-all duration-200 ease-in-out flex-wrap",children:[(0,j.jsx)("h1",{className:"hidden sm:block text-3xl sm:text-4xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent truncate max-w-xs",children:"Mi Perfil"}),(0,j.jsxs)(i.$,{"data-testid":"back-to-home-button",onClick:()=>a("/"),variant:"outline",className:"flex items-center justify-center border-white/20 text-white hover:bg-white/10 px-2 py-2 rounded",children:[(0,j.jsx)(x.A,{className:"w-4 h-4 sm:mr-2 mr-0"}),(0,j.jsx)("span",{className:"hidden sm:inline truncate",children:"Volver al Inicio"})]})]}),(0,j.jsxs)(o.tU,{defaultValue:"info",className:"space-y-6",children:[(0,j.jsxs)(o.j7,{className:"bg-white/5 border border-white/10 flex gap-2 overflow-x-auto no-scrollbar py-1 px-1",children:[(0,j.jsxs)(o.Xi,{value:"info","data-testid":"info-tab",className:"flex items-center gap-2 min-w-0",children:[(0,j.jsx)(h.A,{className:"w-4 h-4"}),(0,j.jsx)("span",{className:"hidden sm:inline truncate",children:"Informaci\xf3n"})]}),(0,j.jsxs)(o.Xi,{value:"watchlist","data-testid":"watchlist-tab",className:"flex items-center gap-2 min-w-0",children:[(0,j.jsx)(p.A,{className:"w-4 h-4"}),(0,j.jsxs)("span",{className:"hidden sm:inline truncate",children:["Ver Luego (",s.length,")"]})]}),(0,j.jsxs)(o.Xi,{value:"reviews","data-testid":"reviews-tab",className:"flex items-center gap-2 min-w-0",children:[(0,j.jsx)(u.A,{className:"w-4 h-4"}),(0,j.jsxs)("span",{className:"hidden sm:inline truncate",children:["Mis Rese\xf1as (",b.length,")"]})]}),(0,j.jsxs)(o.Xi,{value:"password","data-testid":"password-tab",className:"flex items-center gap-2 min-w-0",children:[(0,j.jsx)(w,{className:"w-4 h-4"}),(0,j.jsx)("span",{className:"hidden sm:inline truncate",children:"Cambiar Contrase\xf1a"})]})]}),(0,j.jsx)(o.av,{value:"info",children:(0,j.jsxs)(d.Zp,{className:"bg-slate-800/50 border-white/10",children:[(0,j.jsx)(d.aR,{children:(0,j.jsx)(d.ZB,{className:"text-white",children:"Informaci\xf3n del Usuario"})}),(0,j.jsxs)(d.Wu,{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-4 min-w-0",children:[(0,j.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center flex-shrink-0",children:(0,j.jsx)(h.A,{className:"w-7 h-7 sm:w-8 sm:h-8 text-white"})}),(0,j.jsxs)("div",{className:"min-w-0",children:[(0,j.jsx)("p",{className:"hidden sm:block text-xl font-semibold text-white truncate",children:null===e||void 0===e?void 0:e.email}),(0,j.jsxs)("p",{className:"hidden sm:block text-gray-400",children:["Rol: ",(0,j.jsx)("span",{className:"text-cyan-400",children:"admin"===(null===e||void 0===e?void 0:e.role)?"Administrador":"Usuario"})]})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mt-4",children:[(0,j.jsxs)("div",{className:"glass rounded-xl p-3 text-center",children:[(0,j.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-cyan-400",children:s.length}),(0,j.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Para ver luego"})]}),(0,j.jsxs)("div",{className:"glass rounded-xl p-3 text-center",children:[(0,j.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-blue-400",children:b.length}),(0,j.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Rese\xf1as"})]}),(0,j.jsxs)("div",{className:"glass rounded-xl p-3 text-center",children:[(0,j.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-purple-400",children:b.length>0?(b.reduce((e,a)=>e+a.rating,0)/b.length).toFixed(1):"0"}),(0,j.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Calificaci\xf3n promedio"})]})]})]})]})}),(0,j.jsx)(o.av,{value:"watchlist",children:(0,j.jsxs)(d.Zp,{className:"bg-slate-800/50 border-white/10",children:[(0,j.jsx)(d.aR,{children:(0,j.jsx)(d.ZB,{className:"text-white",children:"Contenido para Ver Luego"})}),(0,j.jsx)(d.Wu,{children:0===s.length?(0,j.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No tienes contenido guardado"}):(0,j.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.map(e=>(0,j.jsxs)("div",{className:"glass rounded-xl overflow-hidden group relative",children:[(0,j.jsxs)("div",{className:"cursor-pointer",onClick:()=>a("/content/".concat(e.id)),children:[(0,j.jsx)("div",{className:"relative aspect-[2/3] overflow-hidden",children:(0,j.jsx)("img",{src:e.poster_path?"".concat("https://image.tmdb.org/t/p/w500").concat(e.poster_path):"https://via.placeholder.com/500x750?text=No+Image",alt:e.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})}),(0,j.jsx)("div",{className:"p-3",children:(0,j.jsx)("h4",{className:"font-semibold text-white truncate text-sm max-w-full",children:e.title})})]}),(0,j.jsx)(i.$,{"data-testid":"remove-watchlist-".concat(e.id),onClick:a=>{a.stopPropagation(),(async e=>{try{await r.A.delete("".concat(v,"/watchlist/").concat(e)),m.oR.success("Eliminado de la lista"),V()}catch(a){m.oR.error("Error al eliminar de la lista")}})(e.id)},variant:"ghost",size:"sm",className:"absolute top-2 right-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 backdrop-blur-sm",children:(0,j.jsx)(N.A,{className:"w-4 h-4"})})]},e.id))})})]})}),(0,j.jsx)(o.av,{value:"reviews",children:(0,j.jsxs)(d.Zp,{className:"bg-slate-800/50 border-white/10",children:[(0,j.jsx)(d.aR,{children:(0,j.jsx)(d.ZB,{className:"text-white",children:"Mis Rese\xf1as"})}),(0,j.jsx)(d.Wu,{children:0===b.length?(0,j.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No has escrito rese\xf1as todav\xeda"}):(0,j.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,j.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-start justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,j.jsxs)("div",{className:"flex-1 mb-3 sm:mb-0",children:[(0,j.jsx)("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((a,s)=>(0,j.jsx)(g.A,{className:"w-4 h-4 ".concat(s<e.rating?"fill-yellow-400 text-yellow-400":"text-gray-600")},s))}),(0,j.jsx)("p",{className:"text-gray-300",children:e.review_text}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.created_at).toLocaleDateString()})]}),(0,j.jsx)("div",{children:(0,j.jsxs)(i.$,{"data-testid":"delete-user-review-".concat(e.id),onClick:()=>(async e=>{try{await r.A.delete("".concat(v,"/reviews/").concat(e)),m.oR.success("Rese\xf1a eliminada"),z()}catch(a){m.oR.error("Error al eliminar rese\xf1a")}})(e.id),variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",children:[(0,j.jsx)(N.A,{className:"w-4 h-4"}),(0,j.jsx)("span",{className:"hidden sm:inline ml-2",children:"Eliminar"})]})})]},e.id))})})]})}),(0,j.jsx)(o.av,{value:"password",children:(0,j.jsxs)(d.Zp,{className:"bg-slate-800/50 border-white/10",children:[(0,j.jsx)(d.aR,{children:(0,j.jsx)(d.ZB,{className:"text-white",children:"Cambiar Contrase\xf1a"})}),(0,j.jsxs)(d.Wu,{className:"space-y-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Contrase\xf1a Actual"}),(0,j.jsx)(n.p,{"data-testid":"old-password-input",type:"password",placeholder:"Contrase\xf1a actual",value:A,onChange:e=>k(e.target.value),className:"bg-slate-900/50 border-white/10 text-white"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Nueva Contrase\xf1a"}),(0,j.jsx)(n.p,{"data-testid":"new-password-input",type:"password",placeholder:"Nueva contrase\xf1a",value:C,onChange:e=>R(e.target.value),className:"bg-slate-900/50 border-white/10 text-white"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Confirmar Nueva Contrase\xf1a"}),(0,j.jsx)(n.p,{"data-testid":"confirm-password-input",type:"password",placeholder:"Confirmar contrase\xf1a",value:Z,onChange:e=>M(e.target.value),className:"bg-slate-900/50 border-white/10 text-white"})]}),(0,j.jsx)(i.$,{"data-testid":"change-password-button",onClick:async()=>{if(C===Z)if(C.length<6)m.oR.error("La contrase\xf1a debe tener al menos 6 caracteres");else try{await r.A.post("".concat(v,"/user/change-password"),{old_password:A,new_password:C}),m.oR.success("Contrase\xf1a cambiada exitosamente"),k(""),R(""),M("")}catch(s){var e,a;m.oR.error((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Error al cambiar contrase\xf1a")}else m.oR.error("Las contrase\xf1as no coinciden")},className:"w-full bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600",children:"Cambiar Contrase\xf1a"})]})]})})]})]})})}},3528:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},3944:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},4669:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},5469:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9855:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(7784).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=745.28613021.chunk.js.map